(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(61)},30:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(4),o=n.n(r),i=(n(30),n(7)),l=n(8),s=n(10),u=n(9),m=n(11),d=n(18),f=n(3),h=n(14),b=n.n(h),p=n(22),g=n(12),v=n(6),O=n(23),j=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.createBarChart(),this.props.animateFauxDOM(800)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"createBarChart",value:function(){!function(e){v.e("#svg_ref").selectAll(".land").remove();var t=500,n=v.e("#svg_ref").insert("svg",".coverfit + *").attr("class","land").append("svg").attr("viewBox","0 0 ".concat(t," ").concat(t)),a=v.b().curve(v.a),c=v.c.apply(0,[-50,50]),r=v.d(-1,7).map(function(e){return[100*e,c()]}),o=r.map(function(e,n){return[e[0],e[1]+150-n*t*.08]}),i=r.reverse().map(function(e,n){return[e[0],e[1]+400-n*t*.03]}),l=a(i.concat(o));n.append("path").attr("opacity",.9).attr("fill","hsl(".concat(255*Math.random(),", 50%, 65%)")).attr("d","M0,0 v".concat(t," h").concat(t," v").concat(-t," z ").concat(l))}()}},{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(c.a.Component),E=Object(O.withFauxDOM)(j),w=n(5),x=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(w.a)(Object(w.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(w.a)(Object(w.a)(n))),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleInput",value:function(e){this.refs.someName.formValue="",e.preventDefault()}},{key:"handleChange",value:function(e){this.setState({formValue:e.target.formValue})}},{key:"handleSubmit",value:function(e){alert(this.props.formValue),e.preventDefault()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:this.props.getAlbums,className:"fixed-form",style:{marginBottom:"2rem"}},c.a.createElement("label",{htmlFor:"artistsearch",className:"ml-2"},"Search your Artist"),c.a.createElement("input",{className:"form__input w-100",type:"text",placeholder:this.props.formValue,onChange:this.handleChange,onClick:this.handleInput.bind(this),ref:"someName",name:"albumName",id:"artistsearch"})))}}]),t}(c.a.Component);var y=function(e){var t=function(){var e=Object(p.a)(b.a.mark(function e(t){var n,a,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="",t&&(t.preventDefault(),n=t.target.elements.albumName.value),e.next=4,fetch("https://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=".concat(n||pe,"&api_key=afcfad19fac36b2d66cf2f17e37f66ed&format=json&limit=20"));case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,ae(c.topalbums.album);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n=Object(a.useRef)(),r=Object(a.useRef)(),o=Object(a.createRef)(),i=Object(a.useState)("Queen"),l=Object(f.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)("Best Hits"),h=Object(f.a)(m,2),v=h[0],O=h[1],j=Object(a.useState)(!1),w=Object(f.a)(j,2),y=w[0],k=w[1],C=Object(a.useState)(!1),N=Object(f.a)(C,2),S=N[0],A=N[1],M=Object(a.useState)("80%"),R=Object(f.a)(M,2),B=R[0],D=R[1],T=Object(a.useState)("50%"),F=Object(f.a)(T,2),I=F[0],L=F[1],U=Object(a.useState)("50%"),z=Object(f.a)(U,2),_=z[0],V=z[1],P=Object(a.useState)("90%"),H=Object(f.a)(P,2),W=H[0],X=H[1],J=Object(a.useState)(38),Q=Object(f.a)(J,2),Y=Q[0],G=Q[1],$=Object(a.useState)(38),q=Object(f.a)($,2),K=q[0],Z=q[1],ee=Object(a.useState)([]),te=Object(f.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)([]),re=Object(f.a)(ce,2),oe=re[0],ie=re[1],le=Object(a.useState)(!1),se=Object(f.a)(le,2),ue=se[0],me=se[1],de=Object(a.useState)(null),fe=Object(f.a)(de,2),he=fe[0],be=fe[1],pe="Queen";Object(a.useEffect)(function(){t(null)},[]),Object(a.useEffect)(function(){be(oe)},[oe]),Object(a.useEffect)(function(){ge(0)},[JSON.stringify(ne)]);var ge=function(e){if(ne&&ne.length){var t=ne[e],n=new Image;n.setAttribute("crossOrigin","anonymous"),n.src=t.image[3]["#text"],n.onload=function(){ie(we(n))},me(!ue)}},ve=function(e,t){var a=n.current.getBoundingClientRect(),c=e.clientX-a.left+20,r=e.clientY-a.top+40;"bottom"===t?(A(!0),k(!1),V("".concat(c,"px")),X("".concat(r,"px"))):"top"===t&&(A(!1),k(!0),L("".concat(c,"px")),D("".concat(r,"px")))},Oe=function(e,t){ve(e,t),document.addEventListener("mousemove",function(e){return je(e,t)})},je=function(e,t){(y||S)&&("bottom"===t&&S?ve(e,t):"top"===t&&y&&ve(e,t))},Ee=function(e){document.removeEventListener("mousemove",je),k(!1),A(!1)},we=function(e){var t=document.createElement("canvas");return t.setAttribute("crossOrigin","anonymous"),e.setAttribute("crossOrigin","anonymous"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/jpeg")},xe=ne,ye=new Image;ye.crossOrigin="anonymous",ye.src=xe,ye.setAttribute("crossOrigin","anonymous");var ke={fontFamily:"'Poppins'",fill:"#FFF",userSelect:"none",zIndex:"40000000",fontWeight:600};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("div",{className:"main-content"},c.a.createElement("div",{className:"sidebar d-flex flex-column"},c.a.createElement(g.c,{href:"/"},"Albumify"),c.a.createElement("p",{className:"text-center d-block"},"This is a fun project inspired by ReplaceCover.com"),c.a.createElement("p",{className:"text-center d-block"},c.a.createElement("a",{className:" mt-0 ",target:"_blank",rel:"noopener noreferrer",href:"mailto:hi@santih.me"}," Contact the creator")),c.a.createElement("div",{className:"row mt-auto text-center"},c.a.createElement("p",null,"Created by ",c.a.createElement("a",{className:" mt-0 white ",rel:"noopener noreferrer",target:"_blank",href:"//santih.me"},"santih.me ")," MIT Licensed"))),c.a.createElement("div",{className:"meme-gen-modal mx-auto w-100"},c.a.createElement(x,{getAlbums:t.bind(this),formValue:pe}),c.a.createElement("h2",{className:"my-4"},"Choose an Album and Go!"),c.a.createElement("div",{className:"pedidosya"},c.a.createElement("svg",{width:"100%",id:"svg_ref",ref:r,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"svg_container",viewBox:"0 0 500 500"},c.a.createElement("foreignObject",{x:0,y:0,width:"100%",height:"100%"},c.a.createElement(E,{ref:o})),c.a.createElement("image",{crossOrigin:"anonymous",ref:n,xlinkHref:he,height:"100%",width:"100%",preserveAspectRatio:"xMidYMid slice",className:"svg2 coverfit"}),c.a.createElement("text",{style:Object(d.a)({},ke,{zIndex:y?4:1,fontSize:Y+"px"}),x:I,y:B,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:function(e){return Oe(e,"top")},onMouseUp:function(e){return Ee()}},s),c.a.createElement("text",{style:Object(d.a)({},ke,{fontSize:K+"px"}),dominantBaseline:"middle",textAnchor:"middle",x:_,y:W,onMouseDown:function(e){return Oe(e,"bottom")},onMouseUp:function(e){return Ee()}},v)),c.a.createElement("div",{className:"meme-form mx-auto"},c.a.createElement("div",{className:"d-block"},c.a.createElement(g.a,null,c.a.createElement(g.b,{className:"d-block",for:"toptext"},"First line of Text"),c.a.createElement("button",{className:"counter-action decrement",onClick:function(e){G(Y-2)}},"-"),c.a.createElement("input",{className:"form-control",type:"text",name:"toptext",id:"toptext",onClick:e.moveToBack,placeholder:"Artist name",onChange:function(e){u(e.currentTarget.value)}}),c.a.createElement("button",{className:"counter-action increment",onClick:function(e){G(Y+2)}},"+"))),c.a.createElement(g.a,null,c.a.createElement(g.b,{for:"bottomtext"},"Second line of Text"),c.a.createElement("div",null,c.a.createElement("button",{className:"counter-action decrement",onClick:function(e){Z(K-2)}},"-"),c.a.createElement("input",{className:"form-control",type:"text",name:"bottomtext",id:"bottomtext",onClick:e.moveToBack,placeholder:"Album name",onChange:function(e){O(e.currentTarget.value)}}),c.a.createElement("button",{className:"counter-action increment",onClick:function(e){Z(K+2)}},"+"))),c.a.createElement("button",{onClick:function(){return function(e){var t=r.current,n=(new XMLSerializer).serializeToString(t),a=document.createElement("canvas");a.setAttribute("id","canvas");var c=a.getContext("2d"),o=t.getBoundingClientRect();a.width=o.width,a.height=o.height;var i,l=document.createElement("img"),s=(new DOMParser).parseFromString(n,"image/svg+xml");(i="https://fonts.googleapis.com/css?family=Poppins:600",fetch(i).then(function(e){return e.text()}).then(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);for(var n=t.sheet,a=[],c=[],r=function(e){var t=function(e){var t=e.style.getPropertyValue("src")||e.style.cssText.match(/url\(.*?\)/g)[0];if(!t)return null;var n=t.split("url(")[1].split(")")[0];return{rule:e,src:t,url:n.replace(/"/g,"")}}(n.cssRules[e]);if(!t)return"continue";a.push(t),c.push(fetch(t.url).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t){var n=new FileReader;n.onload=function(e){return t(n.result)},n.readAsDataURL(e)})}).then(function(e){return t.rule.cssText.replace(t.url,e)}))},o=0;o<n.cssRules.length;o++)r(o);return document.head.removeChild(t),Promise.all(c)})).then(function(t){var n="http://www.w3.org/2000/svg",r=s.createElementNS(n,"defs"),o=s.createElementNS(n,"style");o.innerHTML=t.join("\n"),r.appendChild(o),s.documentElement.appendChild(r);var i=(new XMLSerializer).serializeToString(s.documentElement),u="data:image/svg+xml;charset=utf8,"+encodeURIComponent(i);l.onload=function(t){URL.revokeObjectURL(this.src),c.drawImage(this,0,0),a.getContext("2d").drawImage(l,0,0);var n=a.toDataURL("image/jpeg"),r=document.createElement("a");r.download="".concat(e,".jpg"),r.href=n,document.body.appendChild(r),r.click()},l.src=u,l.setAttribute("crossOrigin","anonymous")}).catch(function(e){return console.log(e)})}("".concat(s,"-").concat(v))},className:"btn btn-success mt-3 w-100"},"Download Album Cover!")))),c.a.createElement("div",{className:"content"},ne&&ne.map(function(e,t){return c.a.createElement("div",{className:"image-holder",onClick:void(o.current&&o.current.createBarChart()),key:"".concat(t)},0!==ne.length&&c.a.createElement("img",{style:{width:"100%",cursor:"pointer",height:"100%"},crossOrigin:"anonymous",alt:e.name,src:e.image[3]["#text"],className:"w-100 first-second",onClick:function(){return ge(t)},role:"presentation",key:t,title:e.name}))})))))},k=(n(56),n(58),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.6815189c.chunk.js.map